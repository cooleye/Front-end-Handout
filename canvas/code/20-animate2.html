<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=
    , initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    html,body{width: 100%;height: 100%;}
    body{margin: 0;padding: 0;overflow: hidden;}
    /* canvas{background: #000;} */
    </style>
</head>
<body>
    <canvas id="mycanvas" width="1280" height="800">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒCanvasğŸ™‚
    </canvas>
    <script>
    
    //è·å–æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡
    const canvas = document.getElementById('mycanvas');
    const ctx = canvas.getContext('2d');
    //è·å–å±å¹•å¤§å°
    let screenWidth = window.screen.width;
    let screenHeight = window.screen.height;
    // console.log(screenWidth,screenHeight)
    if (canvas.getContext){
        //ä¿å­˜åˆå§‹çŠ¶æ€
        ctx.save();
        //è®¾ç½®ç‚¹çš„ä¸ªæ•°
        const POINT_NUMBER = 100;
        //ä¿å­˜ç‚¹åæ ‡çš„æ•°ç»„
        let points = [];
        //ç§»åŠ¨é€Ÿåº¦
        let SPEED = 1;
        
        //åˆå§‹åŒ–
        function init(){
            //æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0,0,1280,800);
            //ç»˜åˆ¶ç‚¹
            for(let i = 0;i < POINT_NUMBER;i++){
                //éšæœºåæ ‡
                let randX = Math.random()*screenWidth;
                let randY = Math.random()*screenHeight;
                //éšæœºæ–¹å‘é€Ÿç‡
                let xd = Math.random()*2-1;
                let yd = Math.random()*2-1;
                //ä¿å­˜ç‚¹åæ ‡
                points.push({x:randX,y:randY,xd:xd,yd:yd});
                ctx.beginPath()
                //ç»˜åˆ¶ç‚¹
                ctx.arc(randX,randY,5,0,Math.PI*2);
                ctx.fill()
            }
        }

        init()

        function draw(){

            ctx.clearRect(0,0,1280,800);
            //ç»˜åˆ¶ç‚¹
            for(let i = 0;i < POINT_NUMBER;i++){
                ctx.beginPath()
                let point = points[i];
                //æ ¹æ®ç‚¹å½“å‰åæ ‡å’Œç§»åŠ¨é€Ÿç‡ï¼Œæ›´æ–°ç‚¹åæ ‡
                let px = point.x + point.xd*SPEED;
                let py = point.y + point.yd*SPEED;
                //ä¿æŒç‚¹åœ¨å±å¹•å†…
                if(px > 1280){
                    px = 1280;
                    point.xd*=-1;
                }
                if(px < 0){
                    px = 0;
                    point.xd*=-1;
                }
                if(py < 0){
                    py = 0;
                    point.yd*=-1;
                }
                if(py>800){
                    point.yd*=-1
                }
                point.x = px;
                point.y = py;
                //æ›´æ–°æ•°ç»„ç‚¹åæ ‡
                points[i] = point;
                //é‡ç»˜ç‚¹
                ctx.arc(px,py,5,0,Math.PI*2);
                ctx.fill()
            }

            /*
            * éå†æ•°ç»„ï¼Œä½¿æ•°ç»„çš„ç‚¹ä¸¤ä¸¤æ¯”è¾ƒï¼Œå½“ç‚¹è·ç¦»å°äº200æ—¶ï¼Œç»˜åˆ¶çº¿æ®µ
            */
            for(let i = 0; i< points.length;i++){
                //å–å¾—ç¬¬ä¸€ä¸ªç‚¹
                let p1 = points[i];
                for(let j = 0;j < points.length;j++){
                    //å–å¾—ç¬¬äºŒä¸ªç‚¹
                    let p2 = points[j];
                    //è®¡ç®—ä¸¤ç‚¹è·ç¦»
                    let l = Math.sqrt(Math.pow(p1.x-p2.x,2) + Math.pow(p1.y-p2.y,2));
                    //å½“ç‚¹è·ç¦»å°äº200æ—¶ï¼Œç»˜åˆ¶çº¿æ®µ
                    if(l < 200){
                        ctx.beginPath();
                        ctx.lineWidth = 1;
                        ctx.moveTo(p1.x,p1.y);
                        ctx.lineTo(p2.x,p2.y);
                        ctx.stroke();
                        ctx.closePath()
                    }
                }
            }
            requestAnimationFrame(draw)
        }
        //åˆæ¬¡è°ƒç”¨drawï¼Œå¼€å¯åŠ¨ç”»
        draw()

    } else {
        // æç¤ºä¸æ”¯æŒcanvas
    }

    </script>
</body>
</html>